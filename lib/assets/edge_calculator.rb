load "./junction_points.rb"

$j_points = junctions
def find_by_id(arr, id)
    arr.each do |i|
        return i if i[:id] == id
    end
end

def calculate_distance(edge)

    from_point = find_by_id($j_points, edge[0])
    to_point = find_by_id($j_points,edge[1])

    x1 = from_point[:left]
    x2 = to_point[:left]

    y1 = from_point[:top]
    y2 = to_point[:top]

    Math.sqrt( (x1-x2)**2 + (y1-y2)**2 ) * 0.28960526315789475 # 1px mapped to map's covered distance in metre

end

edges = [[1, 2],
         [2, 3],
         [3, 4],
         [3, 5],
         [4, 6],
         [5, 7],
         [6, 8],
         [7, 8],
         [8, 9],
         [7, 10],
         [10, 11],
         [11, 12],
         [12, 13],
         [10, 15],
         [15, 16],
         [16, 18],
         [15, 17],
         [17, 18],
         [17, 19],
         [19, 21],
         [21, 22],
         [20, 22],
         [21, 23],
         [23, 24],
         [23, 27],
         [27, 25],
         [24, 26],
         [25, 26],
         [27, 28],
         [28, 29],
         [29, 30],
         [30, 31],
         [29, 32],
         [34, 35],
         [32, 36],
         [35, 36],
         [36, 37],
         [37, 38],
         [38, 39],
         [39, 40],
         [38, 41],
         [41, 42],
         [42, 43],
         [43, 44],
         [44, 45],
         [42, 46],
         [46, 47],
         [47, 45],
         [47, 48],
         [48, 49],
         [49, 50],
         [50, 51],
         [51, 52],
         [51, 53],
         [53, 61],
         [53, 54],
         [54, 56],
         [54, 55],
         [55, 58],
         [56, 57],
         [58, 57],
         [58, 59],
         [60, 63],
         [61, 62],
         [63, 62],
         [63, 64],
         [64, 65],
         [65, 73],
         [66, 67],
         [68, 69],
         [61, 70],
         [62, 66],
         [66, 71],
         [68, 67],
         [68, 70],
         [71, 74],
         [71, 72],
         [74, 75],
         [75, 76],
         [72, 73],
         [77, 78],
         [74, 79],
         [78, 79],
         [76, 77],
         [81, 82],
         [79, 80],
         [80, 81],
         [49, 82]]
arr = []
edges.each do |edge|
    arr << [edge[0], edge[1], calculate_distance(edge)]
end
pp arr